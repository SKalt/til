<!doctype html><html><head><meta charset=utf-8><title>Today I Learned</title><link rel=alternate type=application/rss+xml href=https://skalt.github.io/til/tags/amd/index.xml title="Today I Learned"><link rel=stylesheet href=https://skalt.github.io/til/critical.min.31ad46bcf2679dac23a81f48b7ead9b8f05c1c77fe86709a56fcce62f2ee6107.css><style>@import "https\3a\2f\2fskalt.github.io\2ftil\2fsyntax-light.min.cf596d35510d6f4d08d1eec88d3d2374b3ba785ef2c68eb605930d31b93576a5.css";@import "https\3a\2f\2fskalt.github.io\2ftil\2fsyntax-dark.min.aa68da46c4e748d1db4b8300bf7e282aaa0befd767ada0dcc34734e9ac4e0d51.css" (prefers-color-scheme:dark)</style><script src=https://skalt.github.io/til/copy_on_click.3e911aeaa98e4d249246dac78aeae0701f095f2f31738c7f930a823f012b4c2b.js integrity="sha256-PpEa6qmOTSSSRtrHiurgcB8JXy8xc4x/kwqCPwErTCs=" defer></script></head><body><header><h1><a href=https://skalt.github.io/til/>Today I Learned</a></h1><nav><a href=https://skalt.github.io/til/tags>tags</a>
<a href=https://skalt.github.io/til/search>search</a>
<a href=https://github.com/skalt/til><img alt=repo title=repo src=https://skalt.github.io/til/icon_gh.512c0dbb601adf88d85cdd317f632f04c74f76183e9dd30c331272d46a59aa13.svg>
</a><a href=https://skalt.github.io/til/tags/amd/index.xml><img alt=rss title=rss src=https://skalt.github.io/til/icon_rss.2712ea2c7402d63d00f842fbc9dc64b6461012d726f7385aae61b031d1614ebd.svg></a></a></nav></header><main><h1>tags</h1><hr><article><h3><a href=https://skalt.github.io/til/2024/11/24/>2024/11/24</a></h3><p>That the GPU I have in the Ubuntu workstation in my office isn&rsquo;t compatible with ROCm, AMD&rsquo;s GPU compatibility layer, or Vulkan.
I was trying to run the binary for <a href=https://tabby.tabbyml.com/blog/2024/01/24/running-tabby-locally-with-rocm/>tabby</a> locally.
First, I looked up my graphics card:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=p>;</span> lshw -c video
</span></span><span class=line><span class=cl><span class=c1>#  *-display</span>
</span></span><span class=line><span class=cl><span class=c1>#       description: VGA compatible controller</span>
</span></span><span class=line><span class=cl><span class=c1>#       product: Turks PRO [Radeon HD 7570]</span>
</span></span><span class=line><span class=cl><span class=c1>#       vendor: Advanced Micro Devices, Inc. [AMD/ATI]</span>
</span></span><span class=line><span class=cl><span class=c1>#       physical id: ...</span>
</span></span><span class=line><span class=cl><span class=c1>#       bus info: pci@0000:01:00.0</span>
</span></span><span class=line><span class=cl><span class=c1>#       logical name: /dev/fb0</span>
</span></span><span class=line><span class=cl><span class=c1>#       version: 00</span>
</span></span><span class=line><span class=cl><span class=c1>#       width: 64 bits</span>
</span></span><span class=line><span class=cl><span class=c1>#       clock: 33MHz</span>
</span></span><span class=line><span class=cl><span class=c1>#       capabilities: vga_controller bus_master cap_list rom fb</span>
</span></span><span class=line><span class=cl><span class=c1>#       configuration: depth=32 driver=radeon latency=0 resolution=2048,1080</span>
</span></span><span class=line><span class=cl><span class=c1>#       resources: irq:42 memory:e0000000-efffffff memory:f0020000-f003ffff ioport:e000(size=256) memory:c0000-dffff</span>
</span></span></code></pre></div><p>I followed a few false starts, during which I learned:</p><ul><li>CUDA is more or less NVIDIA-only</li><li>using an incompatible video driver can stall Ubuntu boots :/</li></ul><p>These are obvious in hindsight, but here are some of the commands I learned figuring out how I shot myself in the foot:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>grep <span class=s1>&#39;GRUB_CMDLINE_LINUX&#39;</span> /etc/default/grub 
</span></span><span class=line><span class=cl>sudo vi /etc/default/grub <span class=c1># edit kernel flags</span>
</span></span><span class=line><span class=cl>cat /proc/cmdline <span class=c1># display kernel flags in **current** session</span>
</span></span><span class=line><span class=cl>update-grub <span class=c1># actually apply edited settings</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>inxi -G <span class=c1># display graphics hardware</span>
</span></span><span class=line><span class=cl>sudo apt install inxi
</span></span><span class=line><span class=cl>sudo apt install vulkan-tools
</span></span><span class=line><span class=cl>vulkaninfo <span class=c1># display vulkan config.</span>
</span></span></code></pre></div><p>I finally found the smoking gun in <a href=https://linuxreviews.org/The_Current_State_Of_Older_AMD_Graphics_Hardware_On_Linux:_What_Driver_To_Use_And_What_To_Expect>a 2020 wiki post on old GPUs</a>.
Turns out the <a href="https://www.techpowerup.com/gpu-specs/amd-radeon-hd-7570-2-gb.b1205#:~:text=Release%20Date,Jan%205th%2C%202012">7570 came out in 2012</a> &ndash; while Vulkan was only standardized in 2016.</p><p>This is a bummer, but there&rsquo;s a nonzero chance one of my other salvaged boxes have newer chips.</p></article></main><footer><span>Â© 2022-2022 CC BY-NC-SA 4.0</span></footer></body></html>