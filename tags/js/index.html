<!doctype html><html><head><meta charset=utf-8><title>Today I Learned</title><link rel=stylesheet href=https://skalt.github.io/til/critical.min.6a570671870106508e2497b90c05333d19507b005db5ea6494292ce07c759a26.css></head><body><header><h1><a href=https://skalt.github.io/til/>Today I Learned</a></h1><nav><a href=https://skalt.github.io/til/tags>tags</a>
<a href=https://skalt.github.io/til/search>search</a>
<a href=https://github.com/skalt/til><img alt=repo title=repo src=https://skalt.github.io/til/icon_gh.512c0dbb601adf88d85cdd317f632f04c74f76183e9dd30c331272d46a59aa13.svg></a>
<a href><img alt=rss title=rss src=https://skalt.github.io/til/icon_rss.2712ea2c7402d63d00f842fbc9dc64b6461012d726f7385aae61b031d1614ebd.svg></a></a></nav></header><main><article><h2><a href=https://skalt.github.io/til/2021/07/24/>2021/07/24</a></h2><p><a href=https://web.dev/fetch-upload-streaming/#previously-on-the-exciting-adventures-of-fetch-streams>How to stream large responses using the Javascript <code>Fetch</code> API:</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>reader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>getReader</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> (<span style=color:#66d9ef>true</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>done</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>reader</span>.<span style=color:#a6e22e>read</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>done</span>) <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;Received&#39;</span>, <span style=color:#a6e22e>value</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;Response fully received&#39;</span>);
</span></span></code></pre></div><p>Also: <a href=https://linuxhandbook.com/login-shell/>the circumstances under which ~/.*profile files are run: only if you log in.</a></p></article><article><h2><a href=https://skalt.github.io/til/2022/03/08/>2022/03/08</a></h2><p>random: turns out HTML comments are valid line-comments in JS: <a href=https://smitop.com/post/js-html-comments/>https://smitop.com/post/js-html-comments/</a></p></article><article><h2><a href=https://skalt.github.io/til/2022/04/06/>2022/04/06</a></h2><p>That python f-strings can do</p><ul><li>date and time formatting: <code>f"{today:%Y-%m-%d}"</code></li><li>have a variable-debugging format: <code>f"{x = }, {y = }"</code></li><li>can use <code>__repr__</code> rather than <code>__str__</code>: <code>f"{user!r}"</code></li><li>can be nested: <code>f"output: {value:{width}.{precision}}"</code>
<a href=https://martinheinz.dev/blog/70>https://martinheinz.dev/blog/70</a></li></ul><p>Of the <code>window.prompt()</code> method:
<a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt>https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt</a></p></article><article><h2><a href=https://skalt.github.io/til/2022/05/09/>2022/05/09</a></h2><ul><li><p>that <code>sudo</code> can be configured with the <code>visudo</code> command <em>and</em> that sudo can produce audit logs.
See <a href=https://www.sudo.ws/posts/2022/05/sudo-for-blue-teams-how-to-control-and-log-better/>https://www.sudo.ws/posts/2022/05/sudo-for-blue-teams-how-to-control-and-log-better/</a></p></li><li><p>that there&rsquo;s an <a href=https://developer.mozilla.org/en-US/docs/Web/API/Element/closest><code>Element.closest(selector)</code></a> method, which means you can run this function to set the url to the closest link to an element:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>((<span style=color:#a6e22e>el</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>closest</span>(<span style=color:#e6db74>&#34;[id]&#34;</span>)<span style=color:#f92672>?</span>.<span style=color:#a6e22e>id</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>id</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>hash</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>id</span>;
</span></span><span style=display:flex><span>})(<span style=color:#a6e22e>$0</span>);
</span></span></code></pre></div></li><li><p>that you can use</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>  <span style=color:#66d9ef>SELECT</span> <span style=color:#75715e>/*...*/</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>FROM</span> one_table
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>JOIN</span> other_table
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>USING</span> (common_column)
</span></span></code></pre></div><p>as shorthand for <code>one_table.common_column = other_table.common_column</code>.
See <a href=https://www.postgresql.org/docs/current/sql-select.html#SQL-FROM>https://www.postgresql.org/docs/current/sql-select.html#SQL-FROM</a></p></li></ul></article></main><footer><span>Â© 2022-2022 CC BY-NC-SA 4.0</span></footer></body></html>