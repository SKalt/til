<!doctype html><html><head><meta charset=utf-8><title>Today I Learned</title><link rel=alternate type=application/rss+xml href=https://skalt.github.io/til/tags/ssh/index.xml title="Today I Learned"><link rel=stylesheet href=https://skalt.github.io/til/critical.min.31ad46bcf2679dac23a81f48b7ead9b8f05c1c77fe86709a56fcce62f2ee6107.css><style>@import "https://skalt.github.io/til/syntax-light.min.cf596d35510d6f4d08d1eec88d3d2374b3ba785ef2c68eb605930d31b93576a5.css";@media(prefers-color-scheme:dark){@import "https://skalt.github.io/til/syntax-dark.min.aa68da46c4e748d1db4b8300bf7e282aaa0befd767ada0dcc34734e9ac4e0d51.css"}</style><script src=https://skalt.github.io/til/copy_on_click.3e911aeaa98e4d249246dac78aeae0701f095f2f31738c7f930a823f012b4c2b.js integrity="sha256-PpEa6qmOTSSSRtrHiurgcB8JXy8xc4x/kwqCPwErTCs=" defer></script></head><body><header><h1><a href=https://skalt.github.io/til/>Today I Learned</a></h1><nav><a href=https://skalt.github.io/til/tags>tags</a>
<a href=https://skalt.github.io/til/search>search</a>
<a href=https://github.com/skalt/til><img alt=repo title=repo src=https://skalt.github.io/til/icon_gh.512c0dbb601adf88d85cdd317f632f04c74f76183e9dd30c331272d46a59aa13.svg>
</a><a href=https://skalt.github.io/til/tags/ssh/index.xml><img alt=rss title=rss src=https://skalt.github.io/til/icon_rss.2712ea2c7402d63d00f842fbc9dc64b6461012d726f7385aae61b031d1614ebd.svg></a></a></nav></header><main><h1>tags</h1><hr><article><h3><a href=https://skalt.github.io/til/2022/06/07/>2022/06/07</a></h3><p>That 1Password has a separate SSH key type! <a href=https://developer.1password.com/docs/ssh/manage-keys/>https://developer.1password.com/docs/ssh/manage-keys/</a></p><p>Also, that <code>make</code> has a <code>MAKEFLAGS</code> variable that can be used in recursive calls to <code>make</code>: see
<a href=https://earthly.dev/blog/make-flags/>https://earthly.dev/blog/make-flags/</a>. This also means you can set <code>-r</code>, which eliminates default rules and file actions.</p></article><hr><article><h3><a href=https://skalt.github.io/til/2022/11/01/>2022/11/01</a></h3><p>That you can have too many SSH keys :)</p><p>When I got</p><pre tabindex=0><code>Received disconnect from 256.256.256.256 port 22:2: too many authentication failures
</code></pre><p>I found the following: <a href=https://www.tecmint.com/fix-ssh-too-many-authentication-failures-error/>https://www.tecmint.com/fix-ssh-too-many-authentication-failures-error/</a>
which advocated adding</p><pre tabindex=0><code>Host *
   IdentitiesOnly yes
</code></pre><p>to reduce the number of tried keys</p></article><hr><article><h3><a href=https://skalt.github.io/til/2022/11/10/>2022/11/10</a></h3><p>That Bitbucket pipelines has pipeline-specific SSH keys available at the path <code>$BITBUCKET_SSH_KEY_FILE</code>.
See <a href=https://support.atlassian.com/bitbucket-cloud/docs/variables-and-secrets/>https://support.atlassian.com/bitbucket-cloud/docs/variables-and-secrets/</a></p><hr><p>Also, <code>git rev-parse --show-git-dir</code> yields a relative path to the <code>.git</code> dir for that repo.</p></article><hr><article><h3><a href=https://skalt.github.io/til/2023/01/29/>2023/01/29</a></h3><p>how to setup passwordless SSH login:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ssh-copy-id <span class=k>$(</span>whoami<span class=k>)</span>@<span class=si>${</span><span class=nv>other_host</span><span class=si>}</span>
</span></span></code></pre></div><p><a href=https://linuxize.com/post/how-to-setup-passwordless-ssh-login/>https://linuxize.com/post/how-to-setup-passwordless-ssh-login/</a></p><hr><p>how to change a ubuntu machine&rsquo;s computer&rsquo;s hostname:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;new-hostname&#34;</span> &gt; sudo tee /etc/hostname<span class=p>;</span>
</span></span><span class=line><span class=cl>sudo sed -i <span class=s1>&#39;s/old-hostname/new-hostname/1&#39;</span> /etc/hosts<span class=p>;</span>
</span></span><span class=line><span class=cl>sudo hosname <span class=s1>&#39;new-hostname&#39;</span><span class=p>;</span> <span class=c1># &lt;- for changes to take effect prior to reboot</span>
</span></span></code></pre></div><p>h/t <a href=https://www.howtogeek.com/197934/how-to-change-your-hostname-computer-name-on-ubuntu-linux/>https://www.howtogeek.com/197934/how-to-change-your-hostname-computer-name-on-ubuntu-linux/</a></p></article><hr><article><h3><a href=https://skalt.github.io/til/2023/08/26/>2023/08/26</a></h3><p>That sometimes ssh sessions with x-forwarding don&rsquo;t unlock the GNOME &ldquo;login&rdquo; keyring.
This can lead to &ldquo;Cannot create an item in a locked collection&rdquo; errors.
The way to fix the problem is to:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;password: &#34;</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -s password
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;%s&#34;</span> <span class=s2>&#34;</span><span class=nv>$password</span><span class=s2>&#34;</span> <span class=p>|</span> gnome-keyring-daemon --replace --unlock
</span></span></code></pre></div></article><hr><article><h3><a href=https://skalt.github.io/til/2025/01/08/>2025/01/08</a></h3><p>That zsh completions in <code>/usr/share/zsh/vendor-completions</code> must start with a <code>_</code> in order to work, e.g. <code>/usr/share/zsh/vendor-completions/_rg</code>. Not sure why, though.</p><hr><p>While you can use the same SSH key for both authentication and signing, NIST recommends you shouldn&rsquo;t: <a href=https://gist.github.com/ChristopherA/3d6a2f39c4b623a1a287b3fb7e0aa05b>https://gist.github.com/ChristopherA/3d6a2f39c4b623a1a287b3fb7e0aa05b</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config commit.gpgSign <span class=nb>true</span>
</span></span><span class=line><span class=cl>git config tag.gpgSign <span class=nb>true</span>
</span></span><span class=line><span class=cl>git config gpg.format ssh
</span></span><span class=line><span class=cl>git config user.signingKey <span class=s1>&#39;ssh-ed25519 AAAA...xyz&#39;</span>
</span></span></code></pre></div></article><hr><article><h3><a href=https://skalt.github.io/til/2025/02/07/>2025/02/07</a></h3><p>That to verify git SSH commit signatures locally, you need to</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config gpg.ssh.allowedSignersFile <span class=nv>$PATH_TO_ALLOWED_SIGNERS_FILE</span>
</span></span></code></pre></div><p>The signers file will be in the form</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>user@email.com namespace=&#34;git&#34; ssh-ed25519 AAA...jhq user@email.com
</span></span></code></pre></div><p>Once that&rsquo;s set up. you can run</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git log --show-signature
</span></span></code></pre></div><p>To verify signatures locally. Alternately, you can run</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git log --format<span class=o>=</span><span class=s2>&#34;signed:%G? fingerprint:%GF key:%GK&#34;</span>
</span></span></code></pre></div><p>See <a href=https://git-scm.com/docs/git-log#Documentation/git-log.txt-emGGem>https://git-scm.com/docs/git-log#Documentation/git-log.txt-emGGem</a> for more signature-related log format directives.</p></article></main><footer><span>Â© 2022-2022 CC BY-NC-SA 4.0</span></footer></body></html>