<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Ssh on Today I Learned</title><link>https://skalt.github.io/til/tags/ssh/</link><description>Recent content in Ssh on Today I Learned</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>CC BY-NC-SA 4.0</copyright><atom:link href="https://skalt.github.io/til/tags/ssh/index.xml" rel="self" type="application/rss+xml"/><item><title/><link>https://skalt.github.io/til/2022/06/07/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://skalt.github.io/til/2022/06/07/</guid><description>&lt;p&gt;That 1Password has a separate SSH key type! &lt;a href="https://developer.1password.com/docs/ssh/manage-keys/"&gt;https://developer.1password.com/docs/ssh/manage-keys/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Also, that &lt;code&gt;make&lt;/code&gt; has a &lt;code&gt;MAKEFLAGS&lt;/code&gt; variable that can be used in recursive calls to &lt;code&gt;make&lt;/code&gt;: see
&lt;a href="https://earthly.dev/blog/make-flags/"&gt;https://earthly.dev/blog/make-flags/&lt;/a&gt;. This also means you can set &lt;code&gt;-r&lt;/code&gt;, which eliminates default rules and file actions.&lt;/p&gt;</description></item><item><title/><link>https://skalt.github.io/til/2022/11/01/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://skalt.github.io/til/2022/11/01/</guid><description>&lt;p&gt;That you can have too many SSH keys :)&lt;/p&gt;
&lt;p&gt;When I got&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Received disconnect from 256.256.256.256 port 22:2: too many authentication failures
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;I found the following: &lt;a href="https://www.tecmint.com/fix-ssh-too-many-authentication-failures-error/"&gt;https://www.tecmint.com/fix-ssh-too-many-authentication-failures-error/&lt;/a&gt;
which advocated adding&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Host *
IdentitiesOnly yes
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;to reduce the number of tried keys&lt;/p&gt;</description></item><item><title/><link>https://skalt.github.io/til/2022/11/10/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://skalt.github.io/til/2022/11/10/</guid><description>&lt;p&gt;That Bitbucket pipelines has pipeline-specific SSH keys available at the path &lt;code&gt;$BITBUCKET_SSH_KEY_FILE&lt;/code&gt;.
See &lt;a href="https://support.atlassian.com/bitbucket-cloud/docs/variables-and-secrets/"&gt;https://support.atlassian.com/bitbucket-cloud/docs/variables-and-secrets/&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Also, &lt;code&gt;git rev-parse --show-git-dir&lt;/code&gt; yields a relative path to the &lt;code&gt;.git&lt;/code&gt; dir for that repo.&lt;/p&gt;</description></item><item><title/><link>https://skalt.github.io/til/2023/01/29/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://skalt.github.io/til/2023/01/29/</guid><description>&lt;p&gt;how to setup passwordless SSH login:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh-copy-id &lt;span class="k"&gt;$(&lt;/span&gt;whoami&lt;span class="k"&gt;)&lt;/span&gt;@&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;other_host&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a href="https://linuxize.com/post/how-to-setup-passwordless-ssh-login/"&gt;https://linuxize.com/post/how-to-setup-passwordless-ssh-login/&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;how to change a ubuntu machine&amp;rsquo;s computer&amp;rsquo;s hostname:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;new-hostname&amp;#34;&lt;/span&gt; &amp;gt; sudo tee /etc/hostname&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo sed -i &lt;span class="s1"&gt;&amp;#39;s/old-hostname/new-hostname/1&amp;#39;&lt;/span&gt; /etc/hosts&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo hosname &lt;span class="s1"&gt;&amp;#39;new-hostname&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;# &amp;lt;- for changes to take effect prior to reboot&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;h/t &lt;a href="https://www.howtogeek.com/197934/how-to-change-your-hostname-computer-name-on-ubuntu-linux/"&gt;https://www.howtogeek.com/197934/how-to-change-your-hostname-computer-name-on-ubuntu-linux/&lt;/a&gt;&lt;/p&gt;</description></item><item><title/><link>https://skalt.github.io/til/2023/08/26/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://skalt.github.io/til/2023/08/26/</guid><description>&lt;p&gt;That sometimes ssh sessions with x-forwarding don&amp;rsquo;t unlock the GNOME &amp;ldquo;login&amp;rdquo; keyring.
This can lead to &amp;ldquo;Cannot create an item in a locked collection&amp;rdquo; errors.
The way to fix the problem is to:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;password: &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;read&lt;/span&gt; -s password
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;%s&amp;#34;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$password&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnome-keyring-daemon --replace --unlock
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title/><link>https://skalt.github.io/til/2025/01/08/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://skalt.github.io/til/2025/01/08/</guid><description>&lt;p&gt;That zsh completions in &lt;code&gt;/usr/share/zsh/vendor-completions&lt;/code&gt; must start with a &lt;code&gt;_&lt;/code&gt; in order to work, e.g. &lt;code&gt;/usr/share/zsh/vendor-completions/_rg&lt;/code&gt;. Not sure why, though.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;While you can use the same SSH key for both authentication and signing, NIST recommends you shouldn&amp;rsquo;t: &lt;a href="https://gist.github.com/ChristopherA/3d6a2f39c4b623a1a287b3fb7e0aa05b"&gt;https://gist.github.com/ChristopherA/3d6a2f39c4b623a1a287b3fb7e0aa05b&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git config commit.gpgSign &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git config tag.gpgSign &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git config gpg.format ssh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git config user.signingKey &lt;span class="s1"&gt;&amp;#39;ssh-ed25519 AAAA...xyz&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title/><link>https://skalt.github.io/til/2025/02/07/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://skalt.github.io/til/2025/02/07/</guid><description>&lt;p&gt;That to verify git SSH commit signatures locally, you need to&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git config gpg.ssh.allowedSignersFile &lt;span class="nv"&gt;$PATH_TO_ALLOWED_SIGNERS_FILE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The signers file will be in the form&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-txt" data-lang="txt"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;user@email.com namespace=&amp;#34;git&amp;#34; ssh-ed25519 AAA...jhq user@email.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Once that&amp;rsquo;s set up. you can run&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git log --show-signature
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To verify signatures locally. Alternately, you can run&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git log --format&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;signed:%G? fingerprint:%GF key:%GK&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;See &lt;a href="https://git-scm.com/docs/git-log#Documentation/git-log.txt-emGGem"&gt;https://git-scm.com/docs/git-log#Documentation/git-log.txt-emGGem&lt;/a&gt; for more signature-related log format directives.&lt;/p&gt;</description></item><item><title/><link>https://skalt.github.io/til/2025/10/29/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://skalt.github.io/til/2025/10/29/</guid><description>&lt;p&gt;That setting the &lt;code&gt;SSH_ASKPASS&lt;/code&gt; environment variable to point to an executable will cause &lt;code&gt;ssh&lt;/code&gt; to use the stdout from that program to supply a password, if required.
This is useful for scripts that need to run non-interactively.&lt;/p&gt;
&lt;p&gt;See &lt;a href="https://www.man7.org/linux/man-pages/man1/ssh.1.html#:~:text=SSH%5FASKPASS"&gt;https://www.man7.org/linux/man-pages/man1/ssh.1.html#:~:text=SSH%5FASKPASS&lt;/a&gt;&lt;/p&gt;</description></item></channel></rss>