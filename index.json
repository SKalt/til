[{"content":"TIL that terminals attached to interactive docker containers don\u0026rsquo;t necesarily respect ANSI escape codes. I\u0026rsquo;m still not 100% sure what causes the terminal to respect ANSI escape codes or not, but test -t 1 didn\u0026rsquo;t seem to correctly discriminate.\n","permalink":"https://skalt.github.io/til/2021/07/12/","tags":[]},{"content":"That pickle.loads(pickle.dumps(obj)) is faster than copy.deepcopy(obj) Learned from Simon Willison\u0026rsquo;s twitter\n","permalink":"https://skalt.github.io/til/2021/07/13/","tags":["python"]},{"content":"that Cmd+D selects the next occurence of the currently-highlighted text in VS Code! Thanks to Mark Brewer for teaching me this!\n","permalink":"https://skalt.github.io/til/2021/07/14/","tags":["vscode"]},{"content":"about const enums in typescript, which get compiled to their values rather than getting represented as a mapping object. See https://www.typescriptlang.org/docs/handbook/enums.html#const-enums.\n","permalink":"https://skalt.github.io/til/2021/07/22/","tags":["typescript"]},{"content":"How to stream large responses using the Javascript Fetch API:\nconst response = await fetch(url); const reader = response.body.getReader(); while (true) { const { value, done } = await reader.read(); if (done) break; console.log(\u0026#39;Received\u0026#39;, value); } console.log(\u0026#39;Response fully received\u0026#39;); Also: the circumstances under which ~/.*profile files are run: only if you log in.\n","permalink":"https://skalt.github.io/til/2021/07/24/","tags":["js","javascript","typescript","fetch","shell"]},{"content":"You can create new google docs/spreadsheets/presentations, office365 docs/sheets/presentations, and github repos/gists/codespaces by accessing specific URLs in the browser:\nG Suite docs: https://doc.new, https://docs.new sheets: https://sheet.new, https://sheets.new slides: http://slide.new, http://slides.new Office 365 docs: https://word.new sheets: https://excel.new slides: https://ppt.new github https://repo.new https://gist.new https://codespace.new source: https://twitter.com/rothgar/status/1419339782258184192\n","permalink":"https://skalt.github.io/til/2021/07/25/","tags":["web","productivity"]},{"content":"That you can use git grep to search for a string in a git repo.\n","permalink":"https://skalt.github.io/til/2021/07/31/","tags":["shell","git"]},{"content":"that running python with the -O flag disables assert statements\n","permalink":"https://skalt.github.io/til/2021/08/05/","tags":["python"]},{"content":"about a new source of standard-ish python functionality: https://github.com/mahmoud/boltons\n","permalink":"https://skalt.github.io/til/2021/08/12/","tags":["python"]},{"content":"about go build constraints. Add\n//go:build (booleanExprUsingTagNames) to the top of the conditionally-included file. The boolean expression can be composed of tags (passed via go build -tag \u0026lt;tag\u0026gt;...) or expressions referencing the host or target os and arch.\n","permalink":"https://skalt.github.io/til/2021/09/05/","tags":["go"]},{"content":"about PATH_MAX: the part of the POSIX standard which determines the maximum number of bytes allowed in an absolute path. In Linux, PATH_MAX is 4096 [src], but it\u0026rsquo;s possible to construct longer paths if you don\u0026rsquo;t care about some (most) utilities that use the current working directory to fail due to buffer overflow.\nAlso, I learned that most filesystems restrict file names to 255 bytes.\n","permalink":"https://skalt.github.io/til/2021/09/06/","tags":["fs","linux","posix"]},{"content":"That you can, technically, write inline comments in bash. Specifically, you have to put the comments in a subshell:\necho abc `#put your comment here` \\ def `#another chance for a comment` \\ xyz etc ^ from https://stackoverflow.com/a/23872003/6571327\n","permalink":"https://skalt.github.io/til/2021/09/15/","tags":["bash","shell"]},{"content":"That the IANA suggests 49152–65535 (215 + 214 to 216 − 1) for dynamic or private ports. source: https://en.wikipedia.org/wiki/Ephemeral_port#Range\n","permalink":"https://skalt.github.io/til/2021/09/21/","tags":["networking","linux"]},{"content":"that you can find the version of debian used by your current ubuntu version by running cat /etc/debian_version. Even better, you can source /etc/os-release and get $ID and $VERSION_ID variables. Here\u0026rsquo;s what\u0026rsquo;s in the os-release for Ubuntu 20.04:\nNAME=\u0026#34;Ubuntu\u0026#34; VERSION=\u0026#34;20.04.3 LTS (Focal Fossa)\u0026#34; ID=ubuntu ID_LIKE=debian PRETTY_NAME=\u0026#34;Ubuntu 20.04.3 LTS\u0026#34; VERSION_ID=\u0026#34;20.04\u0026#34; HOME_URL=\u0026#34;https://www.ubuntu.com/\u0026#34; SUPPORT_URL=\u0026#34;https://help.ubuntu.com/\u0026#34; BUG_REPORT_URL=\u0026#34;https://bugs.launchpad.net/ubuntu/\u0026#34; PRIVACY_POLICY_URL=\u0026#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\u0026#34; VERSION_CODENAME=focal UBUNTU_CODENAME=focal Sources: https://askubuntu.com/a/445496/505362 and the source code at https://dot.net/v1/dotnet-installer.sh\n","permalink":"https://skalt.github.io/til/2021/09/24/","tags":["ubuntu"]},{"content":"That there\u0026rsquo;s a postgres keyword DEALLOCATE to remove prepared statements from memory: https://www.postgresql.org/docs/current/sql-deallocate.html\n","permalink":"https://skalt.github.io/til/2021/10/01/","tags":["postgres"]},{"content":"that you can hold shift+alt (linux) or shift+opt (mac) and click to select box of rows and columns in VS Code. See https://code.visualstudio.com/docs/getstarted/tips-and-tricks#_column-box-selection\n","permalink":"https://skalt.github.io/til/2021/10/02/","tags":["vscode"]},{"content":"that different versions of sort(1) have different sorting presets. For example, on ubuntu 20.04 vs debian buster, sort will swap the order of how it sorts _s. These differences can be resolved by passing --unique --dictionary-order --stable.\nBonus: -h/--human-numeric-sort can sort SI suffixes.\n","permalink":"https://skalt.github.io/til/2021/10/04/","tags":["posix","shell","gnu","bash"]},{"content":"That GNU awk has a networking stack: https://www.gnu.org/software/gawk/manual/gawkinet/gawkinet.html\n","permalink":"https://skalt.github.io/til/2021/10/07/","tags":["awk"]},{"content":"That cgo will automagically ship a C.sizeof_YourStruct for every C struct that you can reference as C.YourStruct. This is useful for pointer arithmetic via unsafe.Pointer(uintptr(something) + uintptr(intIndex * C.sizeof_YourStruct)).\n","permalink":"https://skalt.github.io/til/2021/10/09/","tags":["go","cgo","unsafe go"]},{"content":"about the shell until keyword, which is equivalent to while !.\n","permalink":"https://skalt.github.io/til/2021/10/12/","tags":["sh","bash"]},{"content":"about reset, which resets your terminal after a series of undesired ANSI escape codes. I also learned about echo -e \u0026quot;\\e\u0026quot; meaning \u0026ldquo;interpret backslash escape codes\u0026rdquo; (-e) and \u0026quot;\\e\u0026quot; == \u0026quot;\\033\u0026quot;.\n","permalink":"https://skalt.github.io/til/2021/10/13/","tags":["shell","terminal"]},{"content":"that you can write multiple lines to a file using a cat \u0026gt; path/to/file with argument, like\ncat \u0026gt; /tmp/file subsequent typed input is still stdin, which is being read by `cat` and so will be written to the file ^C # cancels `cat` writing to the file ","permalink":"https://skalt.github.io/til/2021/10/19/","tags":["shell"]},{"content":"That there are special CSS classes for theme colors in MSFT PowerPoint: https://www.brightcarbon.com/blog/responsive-svgs-and-smart-icons-in-powerpoint/\n","permalink":"https://skalt.github.io/til/2021/10/22/","tags":["svg","powerpoint","ppt"]},{"content":"About the svg view element: https://developer.mozilla.org/en-US/docs/Web/SVG/Element/view It can be used to create views referable like\n\u0026lt;svg id=\u0026#34;total\u0026#34;\u0026gt; \u0026lt;view id=\u0026#34;view-1\u0026#34; viewBox=\u0026#34;...\u0026#34; /\u0026gt; \u0026lt;circle cx=\u0026#34;1\u0026#34; cy=\u0026#34;1\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;img src=\u0026#34;#view-1\u0026#34; /\u0026gt; ","permalink":"https://skalt.github.io/til/2021/10/27/","tags":["svg"]},{"content":"That you can detect the terminal you\u0026rsquo;re running in (including vscode) by checking the value of \u0026quot;${TERM_PROGRAM:-}\u0026quot;. The VS Code integrated termial always has a $TERM_PROGRAM of vscode.\nSource: https://stackoverflow.com/a/59231654/6571327\n","permalink":"https://skalt.github.io/til/2021/10/28/","tags":["vcscode","bash"]},{"content":"about terminfo, the terminal information database: it can be queried to find all kinds of fun facts about your current terminal. For instance,\ntput cols =\u0026gt; number of columns in the current terminal tput colors =\u0026gt; number of colors the terminal supports tput setaf =\u0026gt; generate ansi codes to set the foregrount color in the terminal Also, infocmp screen dumps a bunch of other related information drawn from terminfo.\n","permalink":"https://skalt.github.io/til/2021/10/30/","tags":["shell","terminal","colors"]},{"content":"That\nThere are two accepted formats for these strings: plain keyword/value strings and URIs. URIs generally follow RFC 3986, except that multi-host connection strings are allowed.\n\u0026ndash; https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING\nyou can pass a application_name parameter to a connection string \u0026ndash; https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNECT-APPLICATION-NAME ","permalink":"https://skalt.github.io/til/2021/11/03/","tags":["postgres"]},{"content":"That sudo has a webpage and an unfortunate mascot: https://www.sudo.ws/\n","permalink":"https://skalt.github.io/til/2021/11/05/","tags":[]},{"content":"locate searches all filenames for a keyword using a database which you can update updatedb. whereis searches for binaries using the same mechanism.\nhttps://www.madebygps.com/an-intro-to-finding-things-in-linux/\n","permalink":"https://skalt.github.io/til/2021/11/23/","tags":["shell","unix","linux"]},{"content":"that there\u0026rsquo;s a pg_sleep(seconds) function: see https://til.hashrocket.com/posts/8a6f68519d-sleeping-in-postgresql\n","permalink":"https://skalt.github.io/til/2021/11/29/","tags":["db","sql","postgres"]},{"content":"that you can write any file in your git history using git show \u0026lt;ref\u0026gt;:\u0026lt;path\u0026gt;.\nSee https://juplo.de/cat-any-file-in-any-commit-with-git/\n","permalink":"https://skalt.github.io/til/2021/12/01/","tags":["git","shell","command-line"]},{"content":"about the css :target selector (matches the element with the id specified by the url document-fragment) and the svg \u0026lt;view\u0026gt; element, which specifies a viewBox and can have an id.\nsee https://css-tricks.com/svg-fragment-identifiers-work/\n","permalink":"https://skalt.github.io/til/2022/01/04/","tags":["svg","css"]},{"content":"1: That you can set statement timeouts:\nALTER DATABASE mydatabase SET statement_timeout = \u0026#39;60s\u0026#39;; Source: https://blog.crunchydata.com/blog/five-tips-for-a-healthier-postgres-database-in-the-new-year\n2: that you can query your cache and index hit metrics (src)\n3: writes to indexed columns don\u0026rsquo;t necessarily update indices:\nIf an indexed column has to have new values inserted, or existing values updated or deleted, the corresponding index does get updated as well. Ironically, that might make queries take more time to evaluate. If write operations are frequently run against a particular column then you may need to more carefully evaluate creating an index here.\nIf there\u0026rsquo;s only one thing you take away from this blog post, I hope it\u0026rsquo;s this: success with indexes will involve some planning, investigation, and maintenance!\n\u0026ndash; https://blog.crunchydata.com/blog/three-easy-things-to-remember-about-postgres-indexes\n","permalink":"https://skalt.github.io/til/2022/01/09/","tags":["postgres"]},{"content":"Of the html table \u0026lt;caption\u0026gt; element\n","permalink":"https://skalt.github.io/til/2022/01/10/","tags":["html","table"]},{"content":"that you can pass default values to css variable references, e.g. var(--button-color, pink)\nAlso,\nIf the SVG fragment identifier addresses a time segment (e.g., MyDrawing.svg#t=10),then the initial view into the SVG document is established as if no fragment identifier was provided. The rendering of the SVG Document shall be as if the setCurrentTime method on the SVG Document element had been called with the begin time value from the fragment identifier. Additionally, if an end time value is provided in the fragment identifier, the effect is equivalent to calling the pauseAnimations method on the SVG Document when the document time reaches the end time of the fragment identifier.\n\u0026ndash; https://www.w3.org/TR/SVG/linking.html#LinksIntoSVG\n","permalink":"https://skalt.github.io/til/2022/01/11/","tags":["css","svg"]},{"content":"In sqlite, all rows have a 64-bit ROWID (with some exceptions). Putting those aside, if you have a single-column integer primary key and use the magic words PRIMARY KEY INTEGER then the pkey becomes an alias for rowid, greatly speeding up lookups. I\u0026rsquo;m not sure how this affects insertions, though.\nhttps://sqlite.org/lang_createtable.html#rowids_and_the_integer_primary_key\n","permalink":"https://skalt.github.io/til/2022/01/13/","tags":["sqlite","rowid"]},{"content":"That you can extract sensitive output values from terraform, you can terraform output $output_name\n\u0026ndash; see https://learn.hashicorp.com/tutorials/terraform/outputs#redact-sensitive-outputs\nAlso, sqlite provides a PRAGMA user_version=\u0026lt;number\u0026gt; to let applications store and retrieve a versioning number. See https://sqlite.org/pragma.html#pragma_user_version\n","permalink":"https://skalt.github.io/til/2022/01/26/","tags":["terraform","sqlite"]},{"content":"that the fmt utility exists. It seems to fold or center text according to a target width.\n","permalink":"https://skalt.github.io/til/2022/01/31/","tags":["posix","shell"]},{"content":"In zsh, ls *(n) will \u0026ldquo;human-sort\u0026rdquo; mostly-numeric filenames.\nhttps://zsh.sourceforge.io/Doc/Release/Expansion.html#Glob-Qualifiers\nhttps://twitter.com/nedbat/status/1491032300800421892\n","permalink":"https://skalt.github.io/til/2022/02/08/","tags":["zsh","shell"]},{"content":" that adding a ! suffix tells tsc that the expression to the left doesn\u0026rsquo;t evaluate to null\nhttps://mariusschulz.com/blog/assertion-functions-in-typescript#using-the-non-null-assertion-operator\nthat going to about:profile in firefox lets you create separate firefox profiles.\n","permalink":"https://skalt.github.io/til/2022/02/14/","tags":["ts","firefox"]},{"content":"you can import from a parent-module using from ... import .\n","permalink":"https://skalt.github.io/til/2022/02/18/","tags":["python"]},{"content":"that you can use variables in make targets, e.g.\npath/${TO}/file: path/${TO}/other/file ","permalink":"https://skalt.github.io/til/2022/02/25/","tags":["make","shell"]},{"content":"If you want to get a list of aws:principalTags/* values that can be used in your IAM conditions, search CloudTrail events for Event Name: AssumeRoleWithSaml.\n","permalink":"https://skalt.github.io/til/2022/02/28/","tags":["aws","saml","sso"]},{"content":"About git-sparse-checkout:\nhttps://linuxhint.com/what-is-git-sparse-checkout/ https://git-scm.com/docs/git-sparse-checkout The general script for doing a sparse checkout is:\n#!/usr/bin/env bash git_url=\u0026#34;${git_url:?required}\u0026#34; target_dir=\u0026#34;${target_dir:?required}\u0026#34; is_git_dir() { git rev-parse; } init() { mkdir -p \u0026#34;$target_dir\u0026#34; \u0026amp;\u0026amp; cd \u0026#34;$target_dir\u0026#34; if ! is_git_dir; then git init \u0026amp;\u0026amp; git remote add -f origin \u0026#34;$git_url\u0026#34; fi git config core.sparseCheckout true \u0026amp;\u0026amp; git sparse-checkout init \u0026amp;\u0026amp; git sparse-checkout set test \u0026amp;\u0026amp; git pull origin master } see also: https://about.gitlab.com/blog/2020/03/13/partial-clone-for-massive-repositories/\n","permalink":"https://skalt.github.io/til/2022/03/06/","tags":["git","shell"]},{"content":"random: turns out HTML comments are valid line-comments in JS: https://smitop.com/post/js-html-comments/\n","permalink":"https://skalt.github.io/til/2022/03/08/","tags":["js"]},{"content":"About the terraform count meta-argument:\nyou can pass a count = n to any resource-block to create n copies of the resource you can differentiate each of the resources using ${count.index} ","permalink":"https://skalt.github.io/til/2022/03/17/","tags":["terraform","tf","iac"]},{"content":"How to check if a debian package is installed:\ndeb_pkg_is_installed() { sudo dpkg --get-selections \u0026#34;$1\u0026#34; | grep -q \u0026#34;$1\u0026#34;; } ","permalink":"https://skalt.github.io/til/2022/03/18/","tags":["shell","debian","deb","dpkg"]},{"content":"How to pass a multi-character field separator to awk:\nawk -F \u0026#39;[ :]+\u0026#39; \u0026#39;{print $1, $3}\u0026#39; # character set: [ :] # repetition: + ","permalink":"https://skalt.github.io/til/2022/03/19/","tags":["awk","shell"]},{"content":"You can replace the nth instance of a pattern on a line with sed:\n; printf \u0026#34;a\\tb\\tc\\n\u0026#34; | sed \u0026#39;s/\\t/\\t~/2\u0026#39; # a b ~c ","permalink":"https://skalt.github.io/til/2022/03/22/","tags":["shell","sed"]},{"content":"to run terraform output $output_name to print a named output\n","permalink":"https://skalt.github.io/til/2022/04/04/","tags":["tf","terraform","cli","sh","shell"]},{"content":"That python f-strings can do\ndate and time formatting: f\u0026quot;{today:%Y-%m-%d}\u0026quot; have a variable-debugging format: f\u0026quot;{x = }, {y = }\u0026quot; can use __repr__ rather than __str__: f\u0026quot;{user!r}\u0026quot; can be nested: f\u0026quot;output: {value:{width}.{precision}}\u0026quot; https://martinheinz.dev/blog/70 Of the window.prompt() method: https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt\n","permalink":"https://skalt.github.io/til/2022/04/06/","tags":["python","js"]},{"content":"What hardlinks are: direct references to inodes. A hardlink can\u0026rsquo;t reference filesystem objects that don\u0026rsquo;t have inodes, such as directories or ports, and aren\u0026rsquo;t portable across different hardware devices even with the same filesystem layout (I think).\nAlso, the opposite of mount(8) is not unmount, it\u0026rsquo;s umount \u0026gt;:(\ngzip -vt $path_to_file checks the validity of a gzip archive: see https://unix.stackexchange.com/questions/359303/check-validity-of-gz-file\n","permalink":"https://skalt.github.io/til/2022/04/08/","tags":["filesystems","fs","gzip"]},{"content":"You can use journalctl -u ${service_name}.service --since ${time:-today} to view the logs of a systemd service: https://www.digitalocean.com/community/tutorials/how-to-use-journalctl-to-view-and-manipulate-systemd-logs\n","permalink":"https://skalt.github.io/til/2022/04/11/","tags":["systemd","sh","bash","systems administration","journalctl"]},{"content":"That a rust if-statement can have a return type\nlet x: u32 = 123; let stmt_result = if x % 2 == 0 { Ok(\u0026#34;even steven\u0026#34;) } else { Err(\u0026#34;odd steven\u0026#34;) }; assert_eq!(x, Err(\u0026#34;odd steven\u0026#34;)); ","permalink":"https://skalt.github.io/til/2022/04/13/","tags":["rust"]},{"content":"tar -ztvf file.tar.gz will list the files in tar.gz\n","permalink":"https://skalt.github.io/til/2022/04/20/","tags":["tar","sh","shell"]},{"content":"that there\u0026rsquo;s a scheduled send option in slack. It\u0026rsquo;s the first option in the dropdown next to the send button.\n","permalink":"https://skalt.github.io/til/2022/04/22/","tags":["slack"]},{"content":"how to check the last apt update time:\nlast_update=\u0026#34;$(stat --format=%Y /var/cache/apt/pkgcache.bin)\u0026#34; https://askubuntu.com/a/410259/505362\n","permalink":"https://skalt.github.io/til/2022/04/29/","tags":["ubuntu","debian","sh","shell"]},{"content":"That there\u0026rsquo;s an IETF spec for CSVs/TSVs, and it uses doubled double-quotes as quote-escapes, as SQL does https://datatracker.ietf.org/doc/html/rfc4180#section-2\n","permalink":"https://skalt.github.io/til/2022/04/30/","tags":["csv","tsv","rfc"]},{"content":"aws policy documents can change the order of items within permissions arrays, but that\u0026rsquo;s safe to ignore:\nOrder is lost for data aws_iam_policy_document Policy elements that are syntactically lists but semantically sets should have their order ignored Perpetual diffs / Objects have changed outside of Terraform tracking ticket Also, that \u0026amp; types take 8 bytes = 64 bits on 64-bit systems\nuse std::mem; pub struct Foo { bar: String, // 24 baz: usize, // 8 } pub struct Quux\u0026lt;\u0026#39;a\u0026gt; { foo: \u0026amp;\u0026#39;a Foo, bar: usize, } fn main() { println!(\u0026#34;Foo: {}\u0026#34;, mem::size_of::\u0026lt;Foo\u0026gt;()); // 32 println!(\u0026#34;\u0026amp;Foo: {}\u0026#34;, mem::size_of::\u0026lt;\u0026amp;Foo\u0026gt;()); // 8 -- a pointer? println!(\u0026#34;Quux: {}\u0026#34;, mem::size_of::\u0026lt;Quux\u0026gt;()); // 16 -- a pointer + a usize! println!(\u0026#34;\u0026amp;Quux: {}\u0026#34;, mem::size_of::\u0026lt;\u0026amp;Quux\u0026gt;()); // 8 -- another pointer } ","permalink":"https://skalt.github.io/til/2022/05/03/","tags":["terraform","tf","aws"]},{"content":"Not to use BETWEEN for timestamps Not to use char(n), or varchar(n), since they\u0026rsquo;re not natively fixed-width and will defy expectations. See https://wiki.postgresql.org/wiki/Don't_Do_This\nAlso, I learned that you can\u0026rsquo;t run chsh(1) with sudo; chsh needs to run as the user who\u0026rsquo;s changing their shell.\n","permalink":"https://skalt.github.io/til/2022/05/04/","tags":["postgres","sql","pg"]},{"content":"To prefer async context managers or asyncio.run() instead of creating+managing event loops natively.\n","permalink":"https://skalt.github.io/til/2022/05/05/","tags":["python"]},{"content":" that sudo can be configured with the visudo command and that sudo can produce audit logs. See https://www.sudo.ws/posts/2022/05/sudo-for-blue-teams-how-to-control-and-log-better/\nthat there\u0026rsquo;s an Element.closest(selector) method, which means you can run this function to set the url to the closest link to an element:\n((el) =\u0026gt; { let id = el.closest(\u0026#34;[id]\u0026#34;)?.id; if (!id) return; else location.hash = id; })($0); that you can use\nSELECT /*...*/ FROM one_table JOIN other_table USING (common_column) as shorthand for one_table.common_column = other_table.common_column. See https://www.postgresql.org/docs/current/sql-select.html#SQL-FROM\n","permalink":"https://skalt.github.io/til/2022/05/09/","tags":["sh","shell","sudo","linux","unix","security","audit","js","DOM","css selector","sql","postgres","sql join"]},{"content":"That you can call time(1) to time how long a shell command takes, like so:\n; time terraform fmt -write=true -recursive . # terraform fmt -write=true -recursive . 0.10s user 0.23s system 24% cpu 1.377 total ","permalink":"https://skalt.github.io/til/2022/05/10/","tags":["sh","bash","time","benchmarking"]},{"content":"that gzip(1), by default, includes file mtimes. The flag to prevent gzip from zipping non-deterministically is gzip --no-name or gzip -n.\n","permalink":"https://skalt.github.io/til/2022/05/16/","tags":["sh","unix","gzip"]},{"content":"The term \u0026ldquo;brochureware\u0026rdquo;: \u0026ldquo;simply listing products and services on a [static] Web site\u0026rdquo;. https://en.wikipedia.org/wiki/Brochureware\n","permalink":"https://skalt.github.io/til/2022/05/18/","tags":["term"]},{"content":"aarch64 is a 64-bit version of armv7 (which seems to be 32-bit). Thus, aarch64 = arm64 ~= armv8\nAArch64 is the 64-bit state introduced in the Armv8-A architecture (https://en.wikipedia.org/wiki/ARM_architecture#ARMv8-A). The 32-bit state which is backwards compatible with Armv7-A and previous 32-bit Arm architectures is referred to as AArch32. Therefore the GNU triplet for the 64-bit ISA is aarch64. The Linux kernel community chose to call their port of the kernel to this architecture arm64 rather than aarch64, so that\u0026rsquo;s where some of the arm64 usage comes from. \u0026ndash; https://stackoverflow.com/a/47274698/6571327\n","permalink":"https://skalt.github.io/til/2022/05/23/","tags":["instruction set architecture","arch"]},{"content":"How to write hugo templates. Hugo seems to require RTFM to get a grasp on the functions and variables available in its DSL.\n","permalink":"https://skalt.github.io/til/2022/05/30/","tags":["hugo","web","template"]},{"content":"That sql has assertions:\nCREATE ASSERTION \u0026lt;Constraint name\u0026gt; CHECK (search condition) [ \u0026lt;constraint attributes\u0026gt; ] see https://crate.io/docs/sql-99/en/latest/chapters/20.html#create-assertion-statement.\nh/t https://www.scattered-thoughts.net/log/0024/ for bringing that to my attention.\nAlso, from the weekend: in postgres, at least, you can call TABLE :table_name; directly to SELECT * FROM :table_name;\nAlso: how to look up a domain name from an ip:\nreverse_ip_lookup() { ip_address=\u0026#34;$1\u0026#34; dig -x $ip_address +noall +answer } Also: how to audit AWS VPC flow logs from CloudWatch Log Insights: use the example queries in the right sidebar.\nAlso: python can execute .zip files directly, like so:\n:; echo \u0026#39;print(\u0026#34;Hello, World!\u0026#34;)\u0026#39; \u0026gt; __main__.py :; zip hello-world.zip __main__.py :; python3 ./hello-world.zip ## Hello, World! h/t https://pradeepchhetri.xyz/til/pythonzip/ for pointing that out.\n","permalink":"https://skalt.github.io/til/2022/05/31/","tags":["sql","sh","networking","dig","python"]},{"content":"That pg_dumpall exists. That you need to use pg_dumpall to dump tablespaces, roles, and subscriptions. That pg_dumpall will dump the postgres role by default, causing resultant dump to fail to restore. Fortunately, I\u0026rsquo;m able to grep -ve '^CREATE ROLE postgres\n","permalink":"https://skalt.github.io/til/2022/06/01/","tags":["postgres","sh","shell","pg_dump"]},{"content":"How to create a JS BigInt value:\nA BigInt value, also sometimes just called a BigInt, is a bigint primitive, created by appending n to the end of an integer literal, or by calling the BigInt() constructor (but without the new operator) and giving it an integer value or string value. \u0026ndash; https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt\n","permalink":"https://skalt.github.io/til/2022/06/02/","tags":["js"]},{"content":"that chickens are native to tropical jungles in south-east Asia.\nSource: https://www.theguardian.com/science/2022/jun/06/chickens-were-first-tempted-down-from-trees-by-rice-research-suggests\n","permalink":"https://skalt.github.io/til/2022/06/06/","tags":["history","food"]},{"content":"That 1Password has a separate SSH key type! https://developer.1password.com/docs/ssh/manage-keys/\nAlso, that make has a MAKEFLAGS variable that can be used in recursive calls to make: see https://earthly.dev/blog/make-flags/. This also means you can set -r, which eliminates default rules and file actions.\n","permalink":"https://skalt.github.io/til/2022/06/07/","tags":["1password","ssh","make","shell"]},{"content":"that you can write raise SomeException() from prev_exception: see https://docs.python.org/3/reference/simple_stmts.html#raise\n","permalink":"https://skalt.github.io/til/2022/06/08/","tags":["python","exception"]},{"content":"That Array.sort separates floats and ints:\nx = [8, 7.4, 14, 13, 12, 11] // [ 8, 7.4, 14, 13, 12, 11 ] x.sort() // [ 11, 12, 13, 14, 7.4, 8 ] x.sort().reverse() // [ 8, 7.4, 14, 13, 12, 11 ] ","permalink":"https://skalt.github.io/til/2022/06/14/","tags":["js"]},{"content":"That on GitHub, you can add footers like\nstatement[^1] [^1]: footnote See https://github.blog/changelog/2021-09-30-footnotes-now-supported-in-markdown-fields/ or https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax#footnotes\n","permalink":"https://skalt.github.io/til/2022/06/24/","tags":["markdown","footnote"]},{"content":"That in Chrome/chromium you can view the actually-rendered font by\ninspecting an element view computed properties source: https://stackoverflow.com/a/31254584/6571327\n","permalink":"https://skalt.github.io/til/2022/07/01/","tags":["css","font","web"]},{"content":"That you can unescape newlines with printf \u0026quot;%b\u0026quot; 'escaped\\nstring':\nescaped=\u0026#39;a\\nb\u0026#39; printf \u0026#34;%b\u0026#34; \u0026#34;$escaped\u0026#34; # a # b ","permalink":"https://skalt.github.io/til/2022/07/02/","tags":["printf","bash","shell"]},{"content":"How to subset fonts:\n# in a virtualenv pip install fonttools brotli zopfli pyftsubset --help see:\nhttps://fonttools.readthedocs.io/en/latest/subset/index.html#initial-glyph-set-specification https://markoskon.com/creating-font-subsets/#available-tools https://clagnut.com/blog/2418/ https://wakamaifondue.com/beta/ Also, optical-sized variable fonts look great.\n","permalink":"https://skalt.github.io/til/2022/07/04/","tags":["woff2","ttf","opsz","optical size","css","font","typography"]},{"content":"that DNS listens on port 53\n","permalink":"https://skalt.github.io/til/2022/07/06/","tags":["dns","port"]},{"content":"That there\u0026rsquo;s an official 1Password terraform provider: https://registry.terraform.io/providers/1Password/onepassword/latest/docs\n","permalink":"https://skalt.github.io/til/2022/07/08/","tags":["1password","terraform"]},{"content":"CMD+K clears the screen same as clear does!\n","permalink":"https://skalt.github.io/til/2022/07/11/","tags":["iterm"]},{"content":"That there\u0026rsquo;s a npm outdated command that finds packages which are not at their most recent versions! Example:\nnpm outdated --global # Package Current Wanted Latest Location # n 7.5.0 7.5.0 9.0.0 global # npm 6.14.15 6.14.17 8.15.0 global # pnpm 6.15.2 6.33.1 7.6.0 global # yarn 1.22.11 1.22.19 1.22.19 global ","permalink":"https://skalt.github.io/til/2022/07/27/","tags":["npm"]},{"content":"that in bash and zsh, you can put a newline in a variable like so:\nnewline=$\u0026#39;\\n\u0026#39; echo \u0026#34;\u0026gt;\u0026gt;\u0026gt;${newline}\u0026lt;\u0026lt;\u0026lt;\u0026#34; learned from: https://stackoverflow.com/a/4456399/6571327\n","permalink":"https://skalt.github.io/til/2022/07/29/","tags":["sh","bash","zsh"]},{"content":"Of the existence of MDX (MultiDimensional eXpressions), a query language for OLAP cubes. I came across it while researching clickhouse db.\n","permalink":"https://skalt.github.io/til/2022/07/30/","tags":["mdx","sql"]},{"content":"About creating json values using sqlite3\u0026rsquo;s built-in json value support.\nExample:\nSELECT json_object(\u0026#39;foo\u0026#39;, json_object(\u0026#39;bar\u0026#39;, \u0026#39;baz\u0026#39;)); -- {\u0026#34;foo\u0026#34;:{\u0026#34;bar\u0026#34;:\u0026#34;baz\u0026#34;}} SELECT json_object(\u0026#39;foo\u0026#39;, json_array(\u0026#39;bar\u0026#39;, \u0026#39;baz\u0026#39;)); -- {\u0026#34;foo\u0026#34;:[\u0026#34;bar\u0026#34;,\u0026#34;baz\u0026#34;]} -- works with nested queries too SELECT json_object(\u0026#39;foo\u0026#39;, (SELECT json_array(\u0026#39;bar\u0026#39;, \u0026#39;baz\u0026#39;))); -- {\u0026#34;foo\u0026#34;:[\u0026#34;bar\u0026#34;,\u0026#34;baz\u0026#34;]} CREATE TABLE t1(a INTEGER PRIMARY KEY, b, c); INSERT INTO t1 VALUES (1, \u0026#39;A\u0026#39;, \u0026#39;one\u0026#39; ), (2, \u0026#39;B\u0026#39;, \u0026#39;two\u0026#39; ), (3, \u0026#39;C\u0026#39;, \u0026#39;three\u0026#39;), (4, \u0026#39;D\u0026#39;, \u0026#39;one\u0026#39; ), (5, \u0026#39;A\u0026#39;, \u0026#39;two\u0026#39; ), (6, \u0026#39;B\u0026#39;, \u0026#39;three\u0026#39;), (7, \u0026#39;C\u0026#39;, \u0026#39;one\u0026#39; ); SELECT json_group_array(b) FROM t1 GROUP BY c; -- [\u0026#34;A\u0026#34;,\u0026#34;D\u0026#34;,\u0026#34;C\u0026#34;] -- [\u0026#34;C\u0026#34;,\u0026#34;B\u0026#34;] -- [\u0026#34;B\u0026#34;,\u0026#34;A\u0026#34;] Caveat: you sometimes have to wrap nested values from nested queries in json(), else they\u0026rsquo;ll be escaped as json string literals. See https://stackoverflow.com/questions/55421128/how-do-i-get-nested-json-data-out-of-sqlite-with-a-multi-level-group-by.\n","permalink":"https://skalt.github.io/til/2022/07/31/","tags":["sqlite3","sqlite","json"]},{"content":"How to consistently establish relative symlinks within a git repo:\ncd \u0026#34;$target_dir\u0026#34; # the directory in which you want to create the symlink ln -s ../relative/path/to/source.file ./symlink.name https://stackoverflow.com/a/15465514/6571327\n","permalink":"https://skalt.github.io/til/2022/08/06/","tags":["git","symlink"]},{"content":"That you can call docker compose kill to kill all docker-compose containers That there\u0026rsquo;s a timeout shell command in gnu coreutils: https://man7.org/linux/man-pages/man1/timeout.1.html\n","permalink":"https://skalt.github.io/til/2022/08/11/","tags":["docker-compose","sh"]},{"content":"That if you run kubectl logs -n my_namespace $pod_name, you need to pass a container name afterwards. I always forget that pod != container.\n","permalink":"https://skalt.github.io/til/2022/08/15/","tags":["kubectl"]},{"content":"About IfExists AWS IAM conditions: if a condition key might not exist (the resource doesn\u0026rsquo;t have it built-in, or a tag isn\u0026rsquo;t set), you can append IfExists to the condition test. For example StringEquals -\u0026gt; StringEqualsIfExists.\nSee https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition_operators.html#Conditions_IfExists\n","permalink":"https://skalt.github.io/til/2022/08/22/","tags":["aws","iam"]},{"content":"that you can lsblk to list the block devices that the OS knows about without sudo.\nthat you can sudo growpart to increase a partition size without restarting the machine.\n","permalink":"https://skalt.github.io/til/2022/08/24/","tags":["ubuntu","sh","shell","bash","filesystem","partition"]},{"content":"That the 14kb limit for fast pages comes from TCP sending 10 initial 1500b packets to guess the amount of bandwidth the client can handle. h/t https://endtimes.dev/why-your-website-should-be-under-14kb-in-size/\nI\u0026rsquo;ve heard of the 14-15kb limit before, but this was the clearest explanation I\u0026rsquo;d heard so far of why the limit exists. Also, the author alleges that the limit applies to http/2 and http/3+QUIC.\n","permalink":"https://skalt.github.io/til/2022/08/25/","tags":["tcp","slow-start","14kb"]},{"content":"That you can list the listening ports on a UNIX machine using sudo lsof -i -P -n | grep LISTEN\n","permalink":"https://skalt.github.io/til/2022/08/29/","tags":["lsof","ports","bash"]},{"content":"That the max duration for any AWS assumed role session is 12h.\n--duration-seconds (integer) The duration, in seconds, of the role session. The value specified can range from 900 seconds (15 minutes) up to the maximum session duration set for the role. **The maximum session duration setting can have a value from 1 hour to 12 hours.** If you specify a value higher than this setting or the administrator setting (whichever is lower), the operation fails. For example, if you specify a session duration of 12 hours, but your administrator set the maximum session duration to 6 hours, your operation fails. Role chaining limits your Amazon Web Services CLI or Amazon Web Services API role session to a maximum of one hour. When you use the AssumeRole API operation to assume a role, you can specify the duration of your role session with the DurationSeconds parameter. You can specify a parameter value of up to 43200 seconds (12 hours), depending on the maximum session duration setting for your role. However, if you assume a role using role chaining and provide a DurationSeconds parameter value greater than one hour, the operation fails. To learn how to view the maximum value for your role, see View the Maximum Session Duration Setting for a Role in the IAM User Guide . By default, the value is set to 3600 seconds. see https://docs.aws.amazon.com/cli/latest/reference/sts/assume-role.html#options\nAlso: I learned that is0-8601 defines formats for durations (like PT2H) and time intervals\n","permalink":"https://skalt.github.io/til/2022/08/30/","tags":["aws","iam","sts assume-role","iso-8601"]},{"content":"That linux has a capability system: https://man7.org/linux/man-pages/man7/capabilities.7.html\nI heard about this in a discussion of privileged ports on linux, specifically about PRIV_NET_PRIVADDR.\n","permalink":"https://skalt.github.io/til/2022/08/31/","tags":["linux","networking","privileges"]},{"content":"that \u0026ldquo;cf.\u0026rdquo; stands for \u0026ldquo;conferatur\u0026rdquo;, or \u0026ldquo;to compare\u0026rdquo;\n","permalink":"https://skalt.github.io/til/2022/09/02/","tags":["cf"]},{"content":" Incentive stock options (ISOs): typically taxed only on sale of shares.\nNon-qualifying stock options (NSOs): typically taxed both on exercise and on sale of shares.\nRestricted stock units (RSUs): type of equity grant where you own shares automatically if certain conditions are met (like vesting). More likely to be issued by larger/older companies. Taxed on vesting.\nStock options: A type of equity compensation that gives you the option to buy (\u0026ldquo;exercise\u0026rdquo;) shares at the \u0026ldquo;strike price\u0026rdquo; listed on your equity grant. Startups tend to issue stock options.\nFair market value (FMV): The FMV is the established value of what one share of common stock is worth as of a specific date. It’s typically determined by a 409A valuation\nPost-termination exercise period (PTEP): Period of time your company gives you to exercise your vested options after you leave. Typically 90 days.\n83(b) election: A tax form that you file if you choose to exercise your options early. If you’re permitted to exercise early and you decide to do it, you need to work with your company to file an 83(b) election with the IRS and make sure to follow all their rules.\n409A valuation: An assessment of the FMV of a private company’s common stock. Must be performed by a qualified, independent valuation provider.\n\u0026ndash; https://carta.com/equity/learn/glossary/\n","permalink":"https://skalt.github.io/til/2022/09/19/","tags":["equity","shares","vesting","money","stock","stonks"]},{"content":"A hack to detect if an element is visible/not:\nconst isVisible = (el) =\u0026gt; (el.offsetWidth || el.offsetHeight) \u0026gt; 0; see https://stackoverflow.com/questions/1343237/how-to-check-elements-visibility-via-javascript\n","permalink":"https://skalt.github.io/til/2022/09/20/","tags":["js","html"]},{"content":"that OCSP stands for Online Certificate Status Protocol. See https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol\n","permalink":"https://skalt.github.io/til/2022/09/30/","tags":["ocsp","acronym","networking"]},{"content":"That you can write \u0026gt;\u0026amp; 1 and it still redirects to stdout! example:\nf() { echo \u0026#34;ok\u0026#34; \u0026gt;\u0026amp;2; } f 2\u0026gt;\u0026amp; 1 | grep ok ","permalink":"https://skalt.github.io/til/2022/10/03/","tags":["bash","shell"]},{"content":"STUN: Session Traversal Utilities for NAT. A standardized set of methods, including a network protocol, for traversal of network address translator (NAT) gateways. see https://en.wikipedia.org/wiki/STUN\nDERP: Designated Encrypted Relay for Packets. See https://tailscale.com/blog/how-tailscale-works/#encrypted-tcp-relays-derp\n","permalink":"https://skalt.github.io/til/2022/10/07/","tags":["stun","derp","networkin","acronym"]},{"content":"How to avoid opening live-share sessions in the web vscode version that I hate: https://learn.microsoft.com/en-us/visualstudio/liveshare/quickstart/browser-join#joining-from-the-desktop\n","permalink":"https://skalt.github.io/til/2022/10/10/","tags":["vscode","live-share"]},{"content":"That terraform plan -detailed-exitcode exists: 0 means no diff, 1 means error, 2 means a diff exists.\nAlso, that you can print the source code of a bash function like so:\nprint_fn_src() { declare -f \u0026#34;$1\u0026#34;; } ","permalink":"https://skalt.github.io/til/2022/10/11/","tags":["terraform","bash","sh","cli"]},{"content":"That \u0026ldquo;CWE\u0026rdquo; is a MITRE abbreviation for \u0026ldquo;common weakness enumeration\u0026rdquo;\n","permalink":"https://skalt.github.io/til/2022/10/13/","tags":["cwe"]},{"content":"That BSD arch command found on Macs also supports a -${arch} flag for running universal binaries.\n","permalink":"https://skalt.github.io/til/2022/10/18/","tags":["arch","cli","sh","bash"]},{"content":"that you can easily send asyncio tasks to threads:\n#!/usr/bin/env python3 import asyncio from asyncio.threads import to_thread async def foo(bar: str): asyncio.sleep print(bar) asyncio.run(to_thread(foo, \u0026#34;baz\u0026#34;)) ","permalink":"https://skalt.github.io/til/2022/10/19/","tags":["python","asyncio"]},{"content":"That ARIA stands for Accessible Rich Internet Applications! See https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA\nThat in linux ls(1) uses the environment variable LS_COLORS to determine the colors in which the filenames are to be displayed. Also, that linux specifies a dir_colors(5) configuration file format for dircolors(1), which exports LS_COLORS\nSee https://man7.org/linux/man-pages/man5/dir_colors.5.html\nThat nix is complicated, which is exactly what my prior research told me.\nOn one hand, it is AWESOME to cd into a project and watch direnv automatically spawn a development shell with all the fixings. On the other, the nix ecosystem is bewildering. I read through a few articles:\nhttps://learnxinyminutes.com/docs/nix/ : covered the expression language\nhttps://xeiaso.net/blog/nix-flakes-1-2022-02-21, part of the https://xeiaso.net/blog/series/nix-flakes series : made a great pitch for using flakes:\nOne of the big annoying parts about getting into Nix is that setting up projects isn\u0026rsquo;t totally a defined science\u0026hellip;Nix flakes helps fix this by doing a few things:\nDefining a flake.nix as the central \u0026ldquo;hub\u0026rdquo; for your project\u0026rsquo;s dependencies, exposed packages, NixOS configuration modules and more. Shipping a set of templates so that you can get projects started easily. Think something like Yeoman but built directly into Nix. You can also define your own templates in your flake.nix. https://nixos.org/guides/declarative-and-reproducible-developer-environments.html : relied on shell.nix\nhttps://nixos.org/guides/towards-reproducibility-pinning-nixpkgs.html introduced niv, a nix package-management cli that differs from nix flake\nhttps://github.com/nix-community/awesome-nix#rust : there are many nix+rust tools, and it\u0026rsquo;s not at all clear to me which (if any) to use\nhttps://xeiaso.net/talks/nixos-pain-2021-11-10 : talks about some pain I\u0026rsquo;ve encountered (e.g. the ambiguity of the term \u0026ldquo;nix\u0026rdquo;, flakes splitting the ecosystem) and some I haven\u0026rsquo;t (NixOs, NixOps troubles \u0026ndash; I don\u0026rsquo;t use those yet.)\nhttps://o.librepush.net/solutions/nix/developing-python-rust-projects-on-nixos/ eschewed flakes since the author wanted to install editable python packages (reasonable)\nThen there are the reasonable-yet-still-more confusing tools like\nhttps://github.com/jetpack-io/devbox : provide development shells https://www.riff.sh/ : provide external linkable libraries for rust projects both of which expose tools to use nix (package manager) to provide development environments without requiring devs to write any nix (the language). Since I\u0026rsquo;m still struggling with the configuration language, I\u0026rsquo;m sympathetic to anyone wanting to avoid writing nix.\nBy dint of procrastinating, I now know that\nsomeone\u0026rsquo;s rewriting nix-the-language? https://tvl.fyi/blog/tvix-status-september-22 someone bolted nix-the-build-system onto Bazel? https://www.tweag.io/blog/2018-03-15-bazel-nix/ pants build currently uses absolute paths for linking some tools into its hermetic build environment? https://github.com/pantsbuild/pants/issues/14492 someone\u0026rsquo;s introducing a new concept, nix cells to make nix flakes easier? https://github.com/divnix/std I\u0026rsquo;m still putting off reading up on nix overlays at the time of writing.\nI could see someone writing SDKs for nix-the-package-manager in non-nix languages that serialize and deserialize to JSON, just like is happening to infrastructure-as-code languages (pulumi, helm, terraform cloud development kit), etc.\nthat you can search for nix package names on https://search.nixos.org/packages\n","permalink":"https://skalt.github.io/til/2022/10/23/","tags":["a11y","aria","nix","direnv","shell","bash","tui","dircolors(1)","LS_COLORS","ls(1)"]},{"content":"That you can list all addresses in terraform state by running\nterraform state list Docs at https://developer.hashicorp.com/terraform/cli/commands/state/list\nAlso, that compgen -v is a function, at least on Mac zsh. Apparently in zsh compgen -v calls something like\nfor var_name in \u0026#34;${(k)parameters[@]}\u0026#34;; do printf \u0026#39;%s\\n\u0026#39; \u0026#34;$var_name\u0026#34; done which is the first time I\u0026rsquo;ve seen that kind of shell syntax. It generates a bad substitution message in bash 3.2, so I can only assume it\u0026rsquo;s zsh-specific.\n","permalink":"https://skalt.github.io/til/2022/10/24/","tags":["terraform","cli","shell","bash","zsh"]},{"content":"That you can have too many SSH keys :)\nWhen I got\nReceived disconnect from 256.256.256.256 port 22:2: too many authentication failures I found the following: https://www.tecmint.com/fix-ssh-too-many-authentication-failures-error/ which advocated adding\nHost * IdentitiesOnly yes to reduce the number of tried keys\n","permalink":"https://skalt.github.io/til/2022/11/01/","tags":["ssh"]},{"content":"that AWS ALB target groups support HTTPS healthcheck targets: https://docs.aws.amazon.com/elasticloadbalancing/latest/application/target-group-health-checks.html\nThat FQDN stands for Fully Qualified Domain Name. For example sub.domain.tld. is a FQDN.\n","permalink":"https://skalt.github.io/til/2022/11/07/","tags":["aws","alb","fqdn","acronym"]},{"content":"That the aws_ec2_tag resource can be used to add tags to AWS RAM-shared VPCs and subnets:\nThis resource should only be used in cases where EC2 resources are created outside Terraform (e.g., AMIs), being shared via Resource Access Manager (RAM), or implicitly created by other means (e.g., Transit Gateway VPN Attachments).\nAlso, that\nWhen the source of a module is a version control repository or archive file (generically, a \u0026ldquo;package\u0026rdquo;), the module itself may be in a sub-directory relative to the root of the package. A special double-slash syntax is interpreted by Terraform to indicate that the remaining path after that point is a sub-directory within the package. For example: git::https://example.com/network.git//modules/vpc?ref=v1.2.0\nhttps://developer.hashicorp.com/terraform/language/modules/sources#modules-in-package-sub-directories\n","permalink":"https://skalt.github.io/til/2022/11/08/","tags":["tf","terraform","aws"]},{"content":"That Bitbucket pipelines has pipeline-specific SSH keys available at the path $BITBUCKET_SSH_KEY_FILE. See https://support.atlassian.com/bitbucket-cloud/docs/variables-and-secrets/\nAlso, git rev-parse --show-git-dir yields a relative path to the .git dir for that repo.\n","permalink":"https://skalt.github.io/til/2022/11/10/","tags":["ssh","bitbucket"]},{"content":"that SAN = Subject Alternate Name. A SAN certificate is a TLS certificate that certifies multiple domain names.\nsee https://support.dnsimple.com/articles/what-is-ssl-san/\nthat AWS Certificate Manager and other free-TLS-certificate services can\u0026rsquo;t validate private domain names since ACME (Automated Certificate Management Environment) relies on public DNS or WHOIS records.\nSee also https://docs.aws.amazon.com/acm/latest/userguide/domain-ownership-validation.html.\n","permalink":"https://skalt.github.io/til/2022/11/11/","tags":["san","dns","tls","acronym"]},{"content":"That pg_catalog.pg_shdepend exists, and \u0026ldquo;records the dependency relationships between database objects and shared objects, such as roles.\u0026rdquo; See https://www.postgresql.org/docs/current/catalog-pg-shdepend.html\n","permalink":"https://skalt.github.io/til/2022/11/14/","tags":["postgres"]},{"content":"that you can option+click to change your cursor\u0026rsquo;s location in iterm2 and mac\u0026rsquo;s terminal.app! H/t Vlad Grenkov for this one :)\nAs of Terraform 1.3, you can write\ntype = optional(real_type, default_value) See https://www.hashicorp.com/blog/terraform-1-3-improves-extensibility-and-maintainability-of-terraform-modules\n","permalink":"https://skalt.github.io/til/2022/11/30/","tags":["iterm","mac","terminal","Terraform","tf"]},{"content":"That NFC in the context of security keys stands for Near Field Communication: a (usually bluetooth) connection that lets your security key authenticate with a nearby device.\nThat git-worktree(1) is pretty handy! During the process of a refactor, I was able to run\ngit worktree add --checkout $local_path $old_branch Explore some deleted/significantly altered files, then inspect the diff between the current and old state of the files!\nSee also: https://jmtd.net/log/worktrees/ https://git-scm.com/docs/git-worktree\n","permalink":"https://skalt.github.io/til/2022/12/05/","tags":["nfc","abbreviation","git-worktree","worktrees"]},{"content":"That you can include doc-comments in macros:\nmacro_rules! documented { ( $(#[$outer:meta])* $name:ident ) =\u0026gt; { $(#[$outer])* fn $name(\u0026amp;self) {} }; } documented!( /// documented my_function ); my_function(); // hovering \u0026#34;function\u0026#34; now shows that the doc-comment is \u0026#34;documented\u0026#34; h/t https://stackoverflow.com/a/33999625/6571327\n","permalink":"https://skalt.github.io/til/2022/12/10/","tags":["rust","macros","macro_rules","macro_rules!","docs","documentation"]},{"content":"that it\u0026rsquo;s possible to create indices on materialized views in postgres: https://www.postgresql.org/docs/current/rules-materializedviews.html#RULES-MATERIALIZEDVIEWS\n","permalink":"https://skalt.github.io/til/2022/12/14/","tags":["postgres"]},{"content":"That you can group fields in an html form with a \u0026lt;fieldset\u0026gt; tag, and that it accepts a top-level child \u0026lt;legend\u0026gt; tag. Together,\n\u0026lt;fieldset\u0026gt; \u0026lt;legend\u0026gt;Legend\u0026lt;/legend\u0026gt; \u0026lt;div\u0026gt;...\u0026lt;/div\u0026gt; \u0026lt;/fieldset\u0026gt; produces\n┌────legend─────┐ │ │ │ │ │ ... │ │ │ │ │ └───────────────┘ which is simultaneously cool and hard to style.\n","permalink":"https://skalt.github.io/til/2022/12/18/","tags":["html"]},{"content":"That you need to set a value=\u0026quot;number\u0026quot; attribute AND a max=\u0026quot;number\u0026quot; attribute on a html \u0026lt;progress\u0026gt; element in order to display fractional progress.\nSee https://developer.mozilla.org/en-US/docs/Web/HTML/Element/progress\n","permalink":"https://skalt.github.io/til/2022/12/26/","tags":["html","progress element"]},{"content":"The difference between triggers and event triggers in postgres:\nUnlike regular triggers, which are attached to a single table and capture only DML events, event triggers are global to a particular database and are capable of capturing DDL events. Like regular triggers, event triggers can be written in any procedural language that includes event trigger support, or in C, but not in plain SQL.\n\u0026ndash; https://www.postgresql.org/docs/current/event-triggers.html\n","permalink":"https://skalt.github.io/til/2023/01/01/","tags":["postgres"]},{"content":"That a directory service doesn\u0026rsquo;t necessarily provide authentication: https://learn.microsoft.com/en-us/previous-versions/windows/desktop/ldap/what-is-a-directory-service describes a directory service as a document database optimized for searches of a hierarchical (directory) tree.\n[Directory] entries are arranged hierarchically in a tree that is structured geographically and organizationally. Global entries, such as countries/regions, reside at the top of the tree, followed by state or national organizations, then organizational units, people, devices, or anything else that might be represented in a directory.\nA directory entry is represented by its entry name, or relative distinguished name (RDN), and by its distinguished name (DN). The DN uniquely identifies each entry on a global level, and is derived by concatenating the RDN of an entry with the RDN of each of its ancestor entries.\nThe LDAP API provides functions that allow LDAP client applications to search for and retrieve information from an LDAP directory server \u0026hellip; There are also [LDAP APIs] that provide access control for servers, by allowing clients to authenticate themselves.\nLDAP doesn\u0026rsquo;t enforce TLS :/ Binding is the step where the LDAP server authenticates the client and, if the client is successfully authenticated, allows the client access to the LDAP server based on that client\u0026rsquo;s privileges.\nTo summarize:\na directory is an ontological tree of people, places, organizations, and phyiscal things LDAP is a protocol for searching a directory LDAP is used for access control (password-only authentication) if the human directory entries have passwords as an attribute. ","permalink":"https://skalt.github.io/til/2023/01/09/","tags":["LDAP","directory service"]},{"content":"that you can set PYTHONDONTWRITEBYTECODE=1 to prevent python from writing pycs (see https://docs.python.org/3/using/cmdline.html#envvar-PYTHONDONTWRITEBYTECODE)\nAlso: that AWS SSO does SCIM actions using the sso-directory:* IAM prefix rather than the sso:* prefix.\n","permalink":"https://skalt.github.io/til/2023/01/17/","tags":["python"]},{"content":"That you need ato git add a flake.nix for the flake\u0026rsquo;s contents to start to work with nix develop\nThis is needed because Nix flakes respects gitignores. If you don\u0026rsquo;t add things to the git staging area, git doesn\u0026rsquo;t know about the files at all, and Nix flakes can\u0026rsquo;t know if it should ignore them. \u0026ndash; https://xeiaso.net/blog/nix-flakes-go-programs\nthat \u0026ldquo;truecolor\u0026rdquo; support in shells is detected with the $COLORTERM env var\n","permalink":"https://skalt.github.io/til/2023/01/28/","tags":["nix","nixos","sh","shell"]},{"content":"how to setup passwordless SSH login:\nssh-copy-id $(whoami)@${other_host} https://linuxize.com/post/how-to-setup-passwordless-ssh-login/\nhow to change a ubuntu machine\u0026rsquo;s computer\u0026rsquo;s hostname:\necho \u0026#34;new-hostname\u0026#34; \u0026gt; sudo tee /etc/hostname; sudo sed -i \u0026#39;s/old-hostname/new-hostname/1\u0026#39; /etc/hosts; sudo hosname \u0026#39;new-hostname\u0026#39;; # \u0026lt;- for changes to take effect prior to reboot h/t https://www.howtogeek.com/197934/how-to-change-your-hostname-computer-name-on-ubuntu-linux/\n","permalink":"https://skalt.github.io/til/2023/01/29/","tags":["ssh","ssh-copy-id","hostname"]},{"content":"That psql et al. support colors:\nexport PG_COLOR=auto # only colorize output to ttys learned from https://fluca1978.github.io/2023/01/23/PostgreSQLColors.html See also:\nhttps://www.postgresql.org/docs/current/color-when.html https://www.postgresql.org/docs/current/color-which.html ","permalink":"https://skalt.github.io/til/2023/01/30/","tags":["psql","postgres","cli","colors"]},{"content":"git restore exists, and works like a more destructive git stash\nSee https://git-scm.com/docs/git-restore\n","permalink":"https://skalt.github.io/til/2023/02/01/","tags":["git"]},{"content":"That in Rust, assert! runs in both debug and release builds. For debug-only assertions, use debug_assert!. See https://doc.rust-lang.org/stable/std/macro.debug_assert.html.\nThat in Python, you can call isinstance(thing, (tuple, OfMany, DifferentClasses)) to check if a variable is an instance of many possible classes. See https://docs.python.org/3/library/functions.html?highlight=isinstance#isinstance.\n","permalink":"https://skalt.github.io/til/2023/02/08/","tags":["rust","python"]},{"content":"That properties of a NamedTuple can have docstrings:\nclass FooBar(NamedTuple): foo: str \u0026#34;\u0026#34;\u0026#34;Foo\u0026#34;\u0026#34;\u0026#34; bar: int \u0026#34;\u0026#34;\u0026#34;Bar\u0026#34;\u0026#34;\u0026#34; As seen in https://github.com/sqlalchemy/sqlalchemy/blob/main/lib/sqlalchemy/sql/compiler.py#L348\n","permalink":"https://skalt.github.io/til/2023/02/21/","tags":["python","NamedTuple"]},{"content":"How to make a self-signed TLS certificate:\n#!/usr/bin/env bash # stolen from https://stackoverflow.com/questions/10175812/how-to-generate-a-self-signed-ssl-certificate-using-openssl openssl \\ req -x509 \\ -newkey rsa:4096 \\ -keyout key.pem \\ -out cert.pem \\ -sha256 -days 365 -nodes -subj \u0026#39;/CN=localhost\u0026#39; ","permalink":"https://skalt.github.io/til/2023/02/22/","tags":["openssl","ssl","self-signed certificate","tls"]}]