<!doctype html><html><head><meta charset=utf-8><title>Today I Learned</title><link rel=stylesheet href=https://skalt.github.io/til/critical.min.594b5b7a363d42cef2053010611ce4d2364196b08b295f8bf7199f9406b595e4.css></head><body><header><h1><a href=https://skalt.github.io/til/>Today I Learned</a></h1><nav><a href=https://skalt.github.io/til/tags>tags</a>
<a href=https://skalt.github.io/til/search>search</a>
<a href=https://github.com/skalt/til><img alt=repo title=repo src=https://skalt.github.io/til/icon_gh.512c0dbb601adf88d85cdd317f632f04c74f76183e9dd30c331272d46a59aa13.svg></a></nav></header><main><h1><a href=https://skalt.github.io/til/2023>2023</a>/<span>06</span>/19</h1><div><a href=https://skalt.github.io/til/tags/rust>rust</a>
<a href=https://skalt.github.io/til/tags/alignment>alignment</a>
<a href=https://skalt.github.io/til/tags/vec>vec</a>
<a href=https://skalt.github.io/til/tags/opt>opt</a>
<a href=https://skalt.github.io/til/tags/ff>ff</a>
<a href=https://skalt.github.io/til/tags/firefox>firefox</a>
<a href=https://skalt.github.io/til/tags/perf>perf</a></div><p>That <code>Option&lt;T></code> costs ~1x the alignment value of <code>T</code>.
I also learned <code>Vec&lt;T></code>&rsquo;s size and alignment don&rsquo;t reflect the size and alignment of <code>T</code> since the Vec is tracking an owned buffer on the heap which isn&rsquo;t counted in the Vec&rsquo;s own size.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rs data-lang=rs><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Alone8</span>(<span style=color:#66d9ef>u8</span>);         <span style=color:#75715e>// size= 1, align=1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Opt8</span>(Option<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u8</span><span style=color:#f92672>&gt;</span>);   <span style=color:#75715e>// size= 2, align=1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Vec8</span>(Vec<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u8</span><span style=color:#f92672>&gt;</span>);      <span style=color:#75715e>// size=24; align=8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Alone64</span>(<span style=color:#66d9ef>u64</span>);       <span style=color:#75715e>// size= 8, align=8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Opt64</span>(Option<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u64</span><span style=color:#f92672>&gt;</span>); <span style=color:#75715e>// size=16, align=8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Vec64</span>(Vec<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u64</span><span style=color:#f92672>&gt;</span>);    <span style=color:#75715e>// size=24; align=8
</span></span></span></code></pre></div><hr><p>That Firefox bundles process and task managers for performance monitoring, available at <code>about:processes</code> and <code>about:tasks</code>, respectively
<a href=https://support.mozilla.org/en-US/kb/task-manager-tabs-or-extensions-are-slowing-firefox>https://support.mozilla.org/en-US/kb/task-manager-tabs-or-extensions-are-slowing-firefox</a></p></main><footer><span>Â© 2022-2022 CC BY-NC-SA 4.0</span></footer></body></html>