<!doctype html><html><head><meta charset=utf-8><title>Today I Learned</title><link rel=stylesheet href=https://skalt.github.io/til/critical.min.b0c8d820c838fcadcd5219bce50cf2bd0400d75a5d917d8fab604f330a7f65aa.css></head><body><header><h1><a href=https://skalt.github.io/til/>Today I Learned</a></h1><nav><a href=https://skalt.github.io/til/tags>tags</a>
<a href=https://skalt.github.io/til/search>search</a>
<a href=https://github.com/skalt/til><img alt=repo title=repo src=https://skalt.github.io/til/icon_gh.512c0dbb601adf88d85cdd317f632f04c74f76183e9dd30c331272d46a59aa13.svg></a>
<a href><img alt=rss title=rss src=https://skalt.github.io/til/icon_rss.2712ea2c7402d63d00f842fbc9dc64b6461012d726f7385aae61b031d1614ebd.svg></a></a></nav></header><main><h1><a href=https://skalt.github.io/til/2022>2022</a>/<span>03</span>/06</h1><div><a href=https://skalt.github.io/til/tags/git>git</a>
<a href=https://skalt.github.io/til/tags/shell>shell</a></div><p>About <code>git-sparse-checkout</code>:</p><ul><li><a href=https://linuxhint.com/what-is-git-sparse-checkout/>https://linuxhint.com/what-is-git-sparse-checkout/</a></li><li><a href=https://git-scm.com/docs/git-sparse-checkout>https://git-scm.com/docs/git-sparse-checkout</a></li></ul><p>The general script for doing a sparse checkout is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>git_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>git_url:?required<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>target_dir<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>target_dir:?required<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>is_git_dir<span style=color:#f92672>()</span> <span style=color:#f92672>{</span> git rev-parse; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>init<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  mkdir -p <span style=color:#e6db74>&#34;</span>$target_dir<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>&amp;&amp;</span> cd <span style=color:#e6db74>&#34;</span>$target_dir<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> ! is_git_dir; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    git init <span style=color:#f92672>&amp;&amp;</span> git remote add -f origin <span style=color:#e6db74>&#34;</span>$git_url<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  git config core.sparseCheckout true <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>    git sparse-checkout init <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>    git sparse-checkout set test <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>    git pull origin master
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>see also: <a href=https://about.gitlab.com/blog/2020/03/13/partial-clone-for-massive-repositories/>https://about.gitlab.com/blog/2020/03/13/partial-clone-for-massive-repositories/</a></p></main><footer><span>Â© 2022-2022 CC BY-NC-SA 4.0</span></footer></body></html>